!function(){function o(){return!!document.querySelector('div[data-headlessui-state="open"]')}function c(){var t,e,n,o;s||((e=document.createElement("link")).rel="stylesheet",e.href="https://raw.githubusercontent.com/refgd/chatgpt-mobile/master/assets/inject.css?t="+u,document.head.appendChild(e)),t=document.location.href,e=document.querySelector("body"),n=null,e&&new MutationObserver(function(e){n&&window.cancelAnimationFrame(n),n=window.requestAnimationFrame(function(){var e=document.location.href;t!==e&&(t=e,"/chat"!==new URL(e).pathname?d({type:i.DismissKeyboard}):setTimeout(function(){l()},500))})}).observe(e,{childList:!0,subtree:!0}),window.addEventListener("scroll",function(e){0<e.target.scrollLeft&&(o?clearTimeout(o):d({type:i.ScrollStarted}),o=setTimeout(function(){d({type:i.ScrollEnded}),o=0},1e3))},!0),setInterval(function(){location.reload()},36e5),l()}var t,i,e,s,u,r,d,l;t=window,s=!1,u="",(e=i=i||{})[e.GetIsDrawerOpen=0]="GetIsDrawerOpen",e[e.SyncTheme=1]="SyncTheme",e[e.DismissKeyboard=2]="DismissKeyboard",e[e.ScrollStarted=3]="ScrollStarted",e[e.ScrollEnded=4]="ScrollEnded",e[e.ReloadPage=5]="ReloadPage",r='\n    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="25" viewBox="0 0 48 48">\n    <path d="M24 40q-6.65 0-11.325-4.675Q8 30.65 8 24q0-6.65 4.675-11.325Q17.35 8 24 8q4.25 0 7.45 1.725T37 14.45V9.5q0-.65.425-1.075Q37.85 8 38.5 8q.65 0 1.075.425Q40 8.85 40 9.5v9.7q0 .65-.425 1.075-.425.425-1.075.425h-9.7q-.65 0-1.075-.425-.425-.425-.425-1.075 0-.65.425-1.075.425-.425 1.075-.425h6.9q-1.9-3-4.85-4.85Q27.9 11 24 11q-5.45 0-9.225 3.775Q11 18.55 11 24q0 5.45 3.775 9.225Q18.55 37 24 37q3.9 0 7.15-2.075Q34.4 32.85 36 29.35q.2-.4.65-.7.45-.3.9-.3.85 0 1.225.55.375.55.075 1.3-1.85 4.45-5.875 7.125T24 40Z"/>\n    </svg>\n',d=function(e){t.ReactNativeWebView&&t.ReactNativeWebView.postMessage(JSON.stringify(e))},l=function(){var e,t,n=document.querySelector("#refresh");console.log("oldRefreshButton",n),n||(n="#__next > div:nth-of-type(1) > div > div",n=document.querySelector(n),e=document.querySelector("#__next > div:nth-of-type(1) > div > div > button:last-of-type"),(t=document.createElement("button")).id="refresh",t.className="px-3",t.innerHTML=""+r,t.addEventListener("click",function(){d({type:i.ReloadPage})}),n.insertBefore(t,e),console.log("inserted refresh button"))},t.RNJAVA={message:function(e){if("openDrawler"==e.type)try{var t;o()||(t=document.querySelector("button"))&&t.click()}catch(e){console.error(e)}else if("closeDrawler"==e.type)try{var n;!o()||(n=document.querySelector("button"))&&n.click()}catch(e){console.error(e)}else"checkIsOpen"==e.type?d({type:i.GetIsDrawerOpen,value:o()}):"load"==e.type&&(s="dev"===e.ver,u=e.ver,c())}}}();